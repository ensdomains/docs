{/*import { Mermaid } from '@/content/prose/mermaid';*/}

{/** @type {import('@/lib/mdxPageProps').MdxMetaProps} */}
export const meta = {
    description: '',
    emoji: 'üéÅ',
    contributors: [
        'serenae-fansubs'
    ]
};

# The ENS Name Wrapper

<Note>
    Are you looking for user-facing guides on how to interact with the Name Wrapper in the ENS Manager App? If so, see here instead: <a href="https://support.ens.domains/en/collections/4194784-name-wrapper-guides">Name Wrapper Guides</a>
</Note>

<iframe className="w-full aspect-video rounded-lg shadow-sm" src="https://www.youtube-nocookie.com/embed/njb7jp5_Qoo?si=YyESSjAk4W5btawz" title="YouTube video player" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowFullScreen></iframe>

## Overview

The <b>Name Wrapper</b> is a new contract for ENS that allows you to "wrap" any ENS name into a ERC-1155 NFT.

### Without the Name Wrapper

Before the Name Wrapper, only .eth 2LDs (second-level domains, like `ens.eth`) had ERC-721 NFTs associated with them, unless the owner created a separate custom contract.

<div className="card1">
    <img src="/content/namewrapper/namewrapper-overview-subnames.jpg" alt="Subnames without NFTs" />
</div>

### With the Name Wrapper

<div className="card1 not-prose grid grid-cols-1 md:grid-cols-2">
  <div className="flex flex-col">
    <div className="grow p-4 flex items-center justify-center">
        <img src="/content/namewrapper/namewrapper-overview-wrapped.jpg" alt="Name Wrapper Diagram" />
    </div>
  </div>
  <div className="flex flex-col border-l border-ens-light-border dark:border-ens-dark-border">
    <div className="grow p-4 flow items-left justify-left">
        <p><b>Parent-Controlled Fuses:</b></p>
        <ul style={{listStyle: 'inside'}}>
            <li key="pcf1"><a href="#fuses" style={{color: '#5298ff', textDecoration: 'underline transparent'}}>Fuses</a> that only the parent owner can burn</li>
            <li key="pcf2">"Perks" that can be given to the owner of a name</li>
        </ul>
        <p><b>Example:</b> By burning `CAN_EXTEND_EXPIRY`, you allow the owner to extend/renew their own subname</p>
        <br/>

        <p><b>Owner-Controlled Fuses:</b></p>
        <ul style={{listStyle: 'inside'}}>
            <li key="ocf1"><a href="#fuses" style={{color: '#5298ff', textDecoration: 'underline transparent'}}>Fuses</a> that either the owner or parent owner can burn</li>
            <li key="ocf2">"Permissions" that can be revoked on a name</li>
        </ul>
        <p><b>Example:</b> By burning `CANNOT_TRANSFER`, the wrapped NFT can no longer be transferred or sold.</p>
        <br/>

        <p><b>Subname Fuses:</b></p>
        <ul style={{listStyle: 'inside'}}>
            <li key="sf1">The parent owner has the power to burn fuses when creating subnames</li>
            <li key="sf2">Decides what perks, permissions, or guarantees to give to subname owners</li>
        </ul>
    </div>
  </div>
</div>

<b>With this new contract, you can wrap:</b>
<ul>
    <li key="wrapex1">
        <p>Any .eth name or subname</p>
        <p><b>Examples:</b> `name.eth`, `sub.name.eth`</p>
    </li>
    <li key="wrapex2">
        <p>Any DNS name or subname</p>
        <p><b>Examples:</b> `name.com`, `sub.name.com`</p>
    </li>
</ul>

Unwrapped .eth 2LDs have the concept of a separate **Owner** (Registrant) and **Manager** (Controller). 

This changes after you wrap the name, because there is only a single account that serves as both the **Owner** and **Manager** for the wrapped name.

## Wrapped States

{/*
<Mermaid chart={`graph LR;
  unregistered((Unregistered));
  unwrapped(Unwrapped);
  wrapped(Wrapped);
  emancipated(Emancipated);
  locked(Locked);
  unregistered--->|register|unwrapped;
  unwrapped--->|wrap|wrapped;
  wrapped--->|unwrap|unwrapped;
  wrapped--->|protect|emancipated;
  emancipated--->|lock|locked;
  emancipated--->|unwrap|unwrapped;
  emancipated--->|expire|unregistered;
  locked-->|expire|unregistered;
`} />
*/}

<div className="card1 p-4">
    <img src="/content/namewrapper/namewrapper-state-diagram.png" alt="State Diagram" />
</div>

Taking the Name Wrapper into account, an ENS name can be in one of these possible states:

#### Unregistered
The name has not even been registered/created yet, or it has expired.

#### Unwrapped
The name exists and has not expired (in the case of .eth second-level names). The Name Wrapper contract does not have ownership over the name. You own the name in the registry and/or .eth registrar.

#### Wrapped
The Name Wrapper contract has ownership of the name (in the registry/registrar). You are issued an ERC-1155 NFT in return, which proves that you are the actual owner. 

You can unwrap the name at any time, which burns the ERC-1155 NFT, and returns ownership in the registry/registrar back to you.

If your name is a subname like `sub.name.eth`, then the owner of `name.eth` can technically replace the subname and transfer it to a different owner. 

In addition, the parent owner can burn parent-controlled fuses on your name.

#### Emancipated
The owner of the parent name is no longer able to replace this name, or burn any additional fuses on it. All .eth second-level names (like `name.eth`) are automatically put into the Emancipated state when they are wrapped.

The name can still be unwrapped and rewrapped by the owner.

#### Locked
The name can no longer be unwrapped. The owner can now burn owner-controlled fuses on the name. Fuses for subnames of this name can now be burned as well.

## Fuses

A "fuse" is a permission or perk that can be granted/revoked on a name. As the name implies, once the fuse is "burned", it cannot be unburned.

Fuses will only reset when the **expiry** is reached. In the ENS Manager UI, this is available in the "Permissions" section of the name.

For example, by default when you wrap a name, you can transfer that NFT around freely, just as you can with other NFTs. However, if the **`CANNOT_TRANSFER`** fuse is burned, then the NFT becomes non-transferrable. In the ENS Manager UI, you would do this by revoking the "Can send this name" permission.

In order to burn fuses on a name, the parent name must be **Locked** (meaning, you cannot unwrap the name). The reason is, if the parent name was not locked, then the owner of the parent name could simply get around the constraints of the Name Wrapper by unwrapping the name, and replacing/revoking subnames against the core ENS Registry.

There are parent-controlled and owner-controlled fuses:

### Parent-Controlled Fuses

Only the owner of the parent name can burn one of these fuses on a name. These can generally be thought of as "perks" that can be granted to a name, though they can be used in other ways.

<table>
    <thead>
        <tr>
            <th>Fuse name</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>**`PARENT_CANNOT_CONTROL`**</td>
            <td>Allows a parent owner to **Emancipate** a child name. After this is burned, the parent will no longer be able to burn any further fuses, and will no longer be able to replace/delete the child name. This fuse must be burned in order for any owner-controlled fuses to be burned on the name.</td>
        </tr>
        <tr>
            <td>**`IS_DOT_ETH`**</td>
            <td>This fuse cannot be burned by users of the Name Wrapper, it is only set internally when a .eth 2LD is wrapped.</td>
        </tr>
        <tr>
            <td>**`CAN_EXTEND_EXPIRY`**</td>
            <td>The owner of the child name will be able to extend their own expiry. Normally, only the parent owner can extend the expiry of a child name. See the <a href="#expiry">Expiry</a> section for more information.</td>
        </tr>
        <tr>
            <td>**Custom Fuses**</td>
            <td>There are 13 other parent-controlled fuses that are not reserved, and can be used in any custom way you want!</td>
        </tr>
    </tbody>
</table>

### Owner-Controlled Fuses

Either the owner of the name or the owner of the parent name can burn one of these fuses. These can generally be thought of as "permissions" that can be revoked on a name, though they can be used in other ways.

<table>
    <thead>
        <tr>
            <th>Fuse name</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>**`CANNOT_UNWRAP`**</td>
            <td>The name will now be **Locked**, and can no longer be unwrapped. This fuse must be burned in order for any other owner-controlled fuses to be burned on the name.</td>
        </tr>
        <tr>
            <td>**`CANNOT_BURN_FUSES`**</td>
            <td>No further fuses can be burned on the name.</td>
        </tr>
        <tr>
            <td>**`CANNOT_TRANSFER`**</td>
            <td>The name (wrapped NFT) can no longer be transferred.</td>
        </tr>
        <tr>
            <td>**`CANNOT_SET_RESOLVER`**</td>
            <td>The resolver contract for the name can no longer be updated.</td>
        </tr>
        <tr>
            <td>**`CANNOT_SET_TTL`**</td>
            <td>The TTL for the name can no longer be updated.</td>
        </tr>
        <tr>
            <td>**`CANNOT_CREATE_SUBDOMAIN`**</td>
            <td>New subdomains can no longer be created.</td>
        </tr>
        <tr>
            <td>**`CANNOT_APPROVE`**</td>
            <td>The approved "subname renewal manager" for the name can no longer be updated. See the <a href="#approved-operators">Approved Operators</a> section for more information.</td>
        </tr>
        <tr>
            <td>**Custom Fuses**</td>
            <td>There are 9 other owner-controlled fuses that are not reserved, and can be used in any custom way you want!</td>
        </tr>
    </tbody>
</table>

### The Emancipated and Locked States

This is also covered in the <a href="#wrapped-states">Wrapped States</a> section, but here is a quick recap:

All .eth second-level names (like `name.eth`) are automatically placed into the Emancipated state when wrapped.

**Emancipated** means that the parent no longer has control over the child name. It can no longer burn any fuses or replace the subname, up until the expiry.

A name is Emancipated when the parent burns the **`PARENT_CANNOT_CONTROL`** (PCC) fuse. The parent must first be in the Locked state to be able to do this.

**Locked** means that the name cannot be unwrapped. This provides assurance to subnames that the parent owner cannot unwrap and then, for example, start replacing subnames directly against the registry.

An Emancipated name is Locked when the **`CANNOT_UNWRAP`** (CU) fuse is burned.

Think of the special PCC / CU fuses recursively:

<ul>
    <li key="fs1">To burn owner-controlled or subname fuses, CU must be burned.</li>
    <li key="fs2">To burn CU, PCC must be burned.</li>
    <li key="fs3">Only the parent can burn PCC on the child name, and only if CU is first burned on the parent.</li>
    <li key="fs4">To burn CU on the parent, PCC must be burned on the parent.</li>
    <li key="fs5">Only the grandparent can burn PCC on the parent name, and only if CU is first burned on the grandparent.</li>
    <li key="fs6">And so on...</li>
</ul>

Follow that chain up until you hit a .eth second-level name like `name.eth`, since .eth second-level names will have PCC automatically burned when wrapping. The parent `eth` node is already in the Locked state.

A parent name can burn all the fuses it needs to on a child name in one transaction. This can be done when the subname is created, or on an existing subname that has not yet been Emancipated.

### DNS Domains and Fuses

Currently, only .eth names support fuses, because only the `eth` node is on-chain native and completely locked beyond anyone's control.

Technically speaking, the owner of a DNS TLD has the ability to burn fuses on that TLD in the Name Wrapper, and set it to the "Locked" state. And then from there, all subnames under that DNS TLD *will* be able to use fuses.

The DNS TLD owner would need to:

<ul>
    <li key="dns1">Request the Controller of that TLD from the ENS DAO</li>
    <li key="dns1">Wrap the TLD node in the Name Wrapper</li>
    <li key="dns1">Burn the **`PARENT_CANNOT_CONTROL`** and **`CANNOT_UNWRAP`** fuses on the wrapped TLD to lock it</li>
</ul>

However, this still does not have all the immutable guarantees that .eth names do. This is because for DNS names, the "source of truth" always lies not in the Ethereum network, but in the DNS network, and the DNS root zone governed by ICANN stakeholders.

So even if the DNS TLD owner "Locks" that TLD in the ENS Name Wrapper, if that TLD were to ever change ownership on the DNS side, then (per the [ENS DAO Constitution](https://docs.ens.domains/v/governance/ens-dao-constitution#iv.-ens-integrates-with-the-global-namespace)) the new owner would be able to override control of that TLD on the ENS side, unwrap it, and replace/revoke all 2LDs. This is just something to keep in mind for wrapped DNS domains.

Even if wrapped DNS domains do not support fuses, you can still use them as ERC-1155 NFTs. They will still have their own NFT metadata and show up in your wallet, with whatever avatar you have set, etc. They just won't have all the extra functionality that comes with the fuse/permission system.

## Expiry

In order to burn any fuses on a name, you must also set an **expiry** on it. This expiry determines how long any burned fuses are active for, and may also determine whether the name itself has expired.

If the name is a .eth 2LD, then the expiry will automatically be set to the same expiry in the .eth Registrar. But for all other names, the parent can choose what expiry to set for a child name.

### Max Expiry for Subnames

By default, the expiry for a name can only be set by the parent, and can only be increased, not decreased. The maximum value for the expiry of a name is the expiry of its parent name.

For example, say a name expires in 5 years. The owner of the name can then set the expiry of its subnames to a maximum of 5 years as well. But the parent could also choose to set the expiry to something less. Let's say the parent sets the expiry of one of its subnames to 2 years.

Then in turn, the owner of the subname can set the expiry of its own subnames up to a maximum of 2 years, but it could also set it to something less, like 1 year.

<div className="card1 p-4">
    <img src="/content/namewrapper/namewrapper-expiry-subnames.jpg" alt="Expiry Diagram" />
</div>

The parent can set a different expiry for different subnames too, just as it can burn different fuses for different subnames.

### Renewals

When a wrapped .eth second-level name (like `name.eth`) is renewed, that new expiry is automatically set in the Name Wrapper as well as in the .eth Registrar. However, the expiry for any other .eth names (like `sub.name.eth`) will not be automatically extended when the parent expiry is extended.

The parent can extend the expiry for an existing subname at any time, even if the subname has been emancipated.

The parent can also choose to approve a separate contract to allow the expiry for subnames to be extended by the subname owner or other accounts.

That is basically how .eth second-level names work: Since the `eth` node is locked in the registrar contract and has the Name Wrapper (which exposes a renew method) approved as a controller, .eth second-level names can be directly renewed by their owners.

The parent can further lock this approved contract in by burning the **`CANNOT_APPROVE`** fuse.

There is also a special parent-controlled fuse called **`CAN_EXTEND_EXPIRY`**. If the parent burns this fuse on a subname, then the owner of that subname (or any approved controller) can also extend the expiry.

So, if you are running a subname registrar and you want to enable "unruggable renewals", you can use one of the above options (or both).

### Special Cases for .eth 2LDs

For .eth second-level names, the end of the name's grace period (from the .eth Registrar) is used for the expiry inside of the Name Wrapper.

So if the name's expiration date in the Registrar is January 1st, then the expiry in the Name Wrapper will reflect that date *plus* the grace period (currently 90 days, so approximately April 1st, depending on the year).

When the name's expiration date (from the .eth Registrar) has been reached, and the name is now in the grace period, all Name Wrapper operations on the name will be restricted. 

The owner will *not* yet lose ownership of the name, but they will also not be able to unwrap or update the name until it has been renewed.

### Expiry Implications

When a name is merely **Wrapped** but not **Emancipated** or **Locked**, parent-controlled fuses can still be burned. This means that the parent can burn a custom fuse for a limited amount of time.

When the expiry is reached, all fuses will be reset, but the name will otherwise be unaffected.

When a name is **Emancipated** or **Locked**, the expiry has an important additional effect. In this scenario, when the expiry has been reached, **the name itself will expire**, and the owner **loses ownership** of the name.

## Contract Details

The Name Wrapper contract is deployed on these chains:

<ul>
    <li key="ct1">Mainnet: <a href="https://etherscan.io/address/0xD4416b13d2b3a9aBae7AcD5D6C2BbDBE25686401#code">`0xD4416b13d2b3a9aBae7AcD5D6C2BbDBE25686401`</a></li>
    <li key="ct2">Goerli: <a href="https://goerli.etherscan.io/address/0x114D4603199df73e7D157787f8778E21fCd13066#code">`0x114D4603199df73e7D157787f8778E21fCd13066`</a></li>
    <li key="ct3">Sepolia: <a href="https://sepolia.etherscan.io/address/0x0635513f179D50A207757E05759CbD106d7dFcE8#code">`0x0635513f179D50A207757E05759CbD106d7dFcE8`</a></li>
</ul>

### Wrapping and Unwrapping

When wrapping a .eth 2LD, you transfer the Owner (Registrant) of the ERC-721 NFT to the Name Wrapper contract.

The contract will then automatically take over the Manager (Controller) for the name as well. 

You can do this by calling the <a href="https://github.com/ensdomains/ens-contracts/tree/master/contracts/wrapper#wrapeth2ld">wrapETH2LD</a> method. Or, you can directly transfer the ERC-721 NFT to the Name Wrapper contract. In return, the contract issues you an ERC-1155 NFT.

When wrapping any other ENS name, you transfer the Manager (Controller) of the name to the Name Wrapper contract. You can do this by calling the <a href="https://github.com/ensdomains/ens-contracts/tree/master/contracts/wrapper#wrap">wrap</a> method. In return, the contract issues you an ERC-1155 NFT.

As the owner of the wrapped name, you can unwrap at any time by calling either <a href="https://github.com/ensdomains/ens-contracts/tree/master/contracts/wrapper#unwrapeth2ld">unwrapETH2LD</a> or <a href="https://github.com/ensdomains/ens-contracts/tree/master/contracts/wrapper#unwrap">unwrap</a>. You can do this as long as the permission to unwrap has not been revoked.

### Approved Operators

#### Full-Control Operator Batch Approvals

Your wrapped name is an ERC-1155 NFT that supports the `setApprovalForAll` method. When you approve an address using this method, it will have **full control** over all wrapped ENS names that you own.

This method is typically used by NFT marketplace contracts.

#### Name-Specific Subname Renewal Manager Approvals

The Name Wrapper also supports the ERC-721 `approve` method. This method is used to approve a single "Subname Renewal Manager" for a specific name.

The "Renewal Manager" does not have full control over your wrapped name, it can only set / extend the expiry on subnames.

Further, if you burn the **`CANNOT_APPROVE`** fuse on your name, then the approved renewal manager can no longer be changed. You can use this to "lock in" that contract, so that you can guarantee to all subname owners that renewals/extensions can always be done.

This approved renewal manager will be reset if the wrapped NFT is burned or re-minted, which happens if you unwrap the name, or if an expired name gets re-registered. It will also be reset if the wrapped NFT is transferred, **unless** the **`CANNOT_APPROVE`** fuse is burned. 

#### Example - Subname Registrar Contract

You can use these operator approval methods to setup a separate contract that can take certain actions on your behalf. One example is setting up a "subname registrar" to allow users to register/renew subnames.

That subname registrar contract would act on your behalf and allow users to register subnames. To allow this, you would call `setApprovalForAll` to give that contract full control over your name (and thus the ability to create subnames).

Then, to enable "unruggable renewals", you could call `approve` on that same contract (or a separate one specific to renewals if you wish) and burn **`CANNOT_APPROVE`** to lock in subname renewals for that contract.

If you need to later on, you would still be able to revoke with `setApprovalForAll`. So the contract would lose full control over your name (and the ability to create new subnames), but it would still be able to perpetually renew/extend existing subnames.

And you can do all of this **without** needing to send your wrapped NFT to that contract.

## Use-Cases

### Lock the resolved records for a name

By default, newly registered names will use the Public Resolver, which just allows the current manager/controller of the name to update any records.

However, in some cases perhaps you want to make sure that a name resolves to specific records and **never** changes. You can accomplish this with the **`CANNOT_SET_RESOLVER`** fuse.

Say you own `mycoolcontract.eth` representing a smart contract. You can use ENS subnames to refer to specific versions of that contract, like `1.mycoolcontract.eth`. And perhaps you want those versioned subnames to always point to:

<ul>
    <li key="uc1-1">The ETH address of that immutable contract</li>
    <li key="uc1-2">The ABI for that contract</li>
    <li key="uc1-3">The contenthash for some versioned documentation page</li>
    <li key="uc1-4">etc.</li>
</ul>

One way to do this is just to make sure the name is **Locked**, all the records are set correctly, and then transfer the owner to some burn address so it can never be updated again.

But of course this isn't ideal, because maybe there are some records that you *do* want to update in the future. Or maybe you still want to keep ownership of that subname for other reasons.

Instead of essentially burning the name, you could create a custom resolver that locks in certain records forever. Then:

<ol>
    <li key="uc1-5">Set the resolver of that name to your custom contract</li>
    <li key="uc1-6">Set the records however you want and lock them into the resolver</li>
    <li key="uc1-7">Burn these fuses on the name:<ul><li key="uc1-8">`PARENT_CANNOT_CONTROL | CANNOT_UNWRAP | CANNOT_SET_RESOLVER`</li></ul></li>
</ol>

Now you can still keep ownership and even some limited management power over the name, while still guaranteeing that the ETH address, ABI, and whatever other records are completely immutable, as long as the expiry is set appropriately.

### Issue subdomains as tickets to an event

Maybe you have `mycoolevent.eth` and you want to issue tickets like `1.ticket.2023.mycoolevent.eth`.

If you want, you can choose to not Emancipate those subnames, but still burn some custom parent-controlled fuses. Those fuses might:

<ul>
    <li key="uc2-1">Indicate what "tier" their event ticket is<ul><li key="uc2-2">Maybe they can upgrade their ticket to a higher tier, which would burn some additional fuses</li></ul></li>
    <li key="uc2-3">Allow them access to the express line or some VIP room<ul><li key="uc2-4">Maybe even automatically via some smart door</li></ul></li>
</ul>

When you burn those fuses, perhaps you also set the expiry to the day after the event ends.

Or, maybe you want your attendees to be able to keep their subnames as a souvenir or proof-of-attendance!

If so, then instead of letting the names expire at the end of the event, you could extend the expiry and burn some additional fuses to allow the attendees to keep them forever! In that case you might want to burn these fuses:

<ul>
    <li key="uc2-5">`CAN_EXTEND_EXPIRY | PARENT_CANNOT_CONTROL`</li>
</ul>

If you want those tickets to be non-transferrable (soulbound to the address that attended), then burn these fuses:

<ul>
    <li key="uc2-6">`CAN_EXTEND_EXPIRY | PARENT_CANNOT_CONTROL | CANNOT_UNWRAP | CANNOT_TRANSFER`</li>
</ul>

### Sell or rent subnames

#### I want to sell / rent out subnames!

Say you own the wrapped name `verypopularname.eth`. Obviously you can just manually create wrapped subnames like `my.verypopularname.eth` and then sell them on an NFT marketplace. But that sure doesn't scale well.

To accomplish this, you will want to create a **subname registrar**. This is a contract that will handle all the registration / renewal for you, and then users will be able to interact with that contract in order to register their own subnames.

In fact, this is exactly how .eth 2LDs are registered. The owner of the `eth` TLD (the NFT contract) delegates registration / renewal to the ETHRegistrarController contract. It is acting as a subname registrar for the name `eth`.

Your contract would expose a `register` method that anyone can call. Under the hood it will use the [setSubnodeOwner](https://github.com/ensdomains/ens-contracts/tree/master/contracts/wrapper#setsubnodeowner) or [setSubnodeRecord](https://github.com/ensdomains/ens-contracts/tree/master/contracts/wrapper#setsubnoderecord) methods to create subnames, passing in the **fuses** and **expiry** you want to set.

#### What fuses should I burn???

First, note that if you want to burn any fuses on subnames, then your name must be **Locked** (meaning **`CANNOT_UNWRAP`** is burned).

Assuming that you want your subnames to be "unruggable", such that you cannot replace / revoke them, then you will want to burn **`PARENT_CANNOT_CONTROL`** on the subnames. This will place them in the **Emancipated** state upon registration.

If you want to sell "forever" subnames, where users register once and can then keep them for as long as they wish, then you can consider burning the **`CAN_EXTEND_EXPIRY`** fuse. 

This will allow the subname owner to extend their own expiry whenever they want. The max expiry is the expiry of the parent name, but the .eth Registrar allows *anyone* to renew/extend a .eth 2LD as well.

If you just want to **rent** subnames, then do not burn **`CAN_EXTEND_EXPIRY`**. Instead, you could include a `renew` method on your contract that users can call for another fee.

If you want to enable "unruggable renewals" for your registrar, to guarantee that users will always be able to renew, then you can call `approve` on the Name Wrapper and approve your registrar contract as the "subname renewal manager" for your name.

Then, burn the **`CANNOT_APPROVE`** fuse on your name, to guarantee that you can never revoke that contract for subname renewals. See the <a href="#approved-operators">Approved Operators</a> section above for more info.

If you want to impose other restrictions on your registered subnames, then you can burn the **`CANNOT_UNWRAP`** fuse to Lock the subname, and also burn whatever other fuses you want.

For example, if you want to prevent owners of your subnames (like `my.verypopularname.eth` from creating their own subnames (like `buy.my.verypopularname.eth`), then you would burn **`CANNOT_UNWRAP`** and **`CANNOT_CREATE_SUBDOMAIN`**.

To recap on fuses...

<ul>
    <li key="uc2-7">Sell permanent names:<ul><li key="uc2-8">`CAN_EXTEND_EXPIRY | PARENT_CANNOT_CONTROL`</li></ul></li>
    <li key="uc2-9">Sell permanent names, but prevent them from creating their own subnames:<ul><li key="uc2-10">`CAN_EXTEND_EXPIRY | PARENT_CANNOT_CONTROL | CANNOT_UNWRAP | CANNOT_CREATE_SUBDOMAIN`</li></ul></li>
    <li key="uc2-11">Rent out names:<ul><li key="uc2-12">`PARENT_CANNOT_CONTROL`</li></ul></li>
    <li key="uc2-13">Rent out names, but prevent them from transferring or reselling them:<ul><li key="uc2-14">`PARENT_CANNOT_CONTROL | CANNOT_UNWRAP | CANNOT_TRANSFER`</li></ul></li>
</ul>

And so on, it's up to you. You can also burn whatever custom parent-controlled or owner-controlled fuses you want to.

#### Can I customize my own rules and fees?

Yes! It's your registrar contract, so you can impose whatever rules and fees you want.

For example, the .eth Registrar imposes a 3-character minimum on all names, as well as a <a href="https://support.ens.domains/core/registration/fees">custom fee structure</a> and a <a href="https://support.ens.domains/core/registration/temporary-premium">temporary premium auction</a> upon expiration.

By default there is no character limit on subnames, but your contract could have its own rules and fee structure or whatever you want. For example, you can:

<ul>
    <li key="uc2-15">Allow or disallow specific addresses from registering / renewing</li>
    <li key="uc2-16">Only allow registration based on some custom criteria like holding a specific NFT</li>
    <li key="uc2-17">Custom length restrictions like only 3+ characters or < 100 characters</li>
    <li key="uc2-18">Only allow names with characters `[a-z0-9]` and nothing else</li>
    <li key="uc2-19">Use a custom fee structure based on:<ul><li key="uc2-20">The length of the name</li><li key="uc2-21">The specific characters that are in the name, like emojis</li><li key="uc2-22">A pre-curated list of "good" names like people's first names</li></ul></li>
    <li key="uc2-23">And whatever other rules you want.</li>
</ul>

### Give subnames out to NFT holders

#### I want to give subnames out to all of my DAO members / NFT holders!

Say you own the wrapped name `mycoolnft.eth`, representing a popular NFT project you created. You want to distribute subnames like `6529.mycoolnft.eth` to all holders.

One option is to just bulk create the subnames and drop the wrapped NFTs into their wallets. This might be good at least as an initial drop, because then the holders don't need to interact with any contract or spend any gas, you're doing that for them!

To create the subnames, you'd use the <a href="https://github.com/ensdomains/ens-contracts/tree/master/contracts/wrapper#setsubnodeowner">setSubnodeOwner</a> or <a href="https://github.com/ensdomains/ens-contracts/tree/master/contracts/wrapper#setsubnoderecord">setSubnodeRecord</a> methods.

You must also decide:

#### How much control over the subnames do you want to relinquish?

Do you want to be able to revoke subnames? Or do you want them to be completely outside your control?

One thing to consider is whether you want the **current** holder of your NFT to always be able to claim/reclaim the corresponding ENS subname. If so, then you will **not** want to Emancipate those subnames (in other words, do not burn **`PARENT_CANNOT_CONTROL`**).

If the subname is Emancipated, then the NFT holder could sell/transfer the NFT but keep the subname (up until the expiry).

To make it easy for anyone to claim/reclaim a subname after your initial drop, you can set up a contract for this.

#### Setting up a subname claim contract

The claim method of your contract could:

<ol>
    <li key="uc3-1">Call `ownerOf` or `balanceOf` on your NFT contract to get or verify the current owner of the NFT</li>
    <li key="uc3-2">Call `ownerOf` or `balanceOf` on the ENS Name Wrapper contract to get or verify the current owner of the wrapped subname<ul><li key="uc3-3">If both owner addresses are the same, just return, nothing to do</li></ul></li>
    <li key="uc3-4">Call `setSubnodeOwner` or `setSubnodeRecord` on the ENS Name Wrapper:<ul><li key="uc3-5">**owner:** The current owner of the NFT</li><li key="uc3-6">**fuses:** What fuses you want to burn (if any) on that subname. If you burn any fuses, you must also set an expiry.</li><li key="uc3-7">**expiry:** When the subname will expire.</li></ul></li>
</ol>

Then, to give that contract access to create subnames on your behalf, you would call `setApprovalForAll` on the Name Wrapper to approve your contract as an operator.

Now, even if the NFT gets sold / transferred, the new owner will be able to claim their `mycoolnft.eth` subname at any time.

In addition, if you expand your NFT collection in the future and there are new owners, then those new owners would be able to claim their subnames as well.

If you are creating a new NFT contract, you could even bake this functionality **directly into the NFT contract** too, instead of needing a separate contract! By doing this, you wouldn't need a separate `claim` method either, your NFT contract would just **automatically transfer the wrapped ENS subname** whenever the NFT itself gets transferred!

#### Giving your subname owners perks

If you decide to not Emancipate the subnames that you issue, you *will* still be able to burn any Parent-Controlled Fuses. There are 13 unreserved parent-controlled fuses that you can use however you wish!

For example, perhaps you want to grant on-chain "perks" or "roles" to certain holders. You would call [setChildFuses](https://github.com/ensdomains/ens-contracts/tree/master/contracts/wrapper#setchildfuses) on the Name Wrapper and pass in the fuses you want to burn, and the expiry.

This means that those "perks" or "roles" can also be time-boxed if you want. Maybe a perk expires in 1 week or something, up to you.

There is also the reserved **`CAN_EXTEND_EXPIRY`** parent-controlled fuse. If you burn this, then the subname owner will be able to extend their own expiry whenever they want.
